# BIV HACK x MISIS ZHABY

## Название проекта
**Конфигуратор страховых продуктов**
Проект представляет собой прототип системы для гибкой настройки страховых продуктов с использованием drag-and-drop интерфейса и EAV-подобной модели данных. Разработан в рамках хакатона BIV HACK для решения кейса, задачей которого выступало придумать способ задания и хранения параметров и связей для гибкой настройки страхового продукта.

---

## Установка и запуск проекта

### Frontend
1. Откройте файл `index.html` (папка frontend).
2. Прототип интерфейса будет доступен в браузере.

### Backend
1. Установить Gradle, для этого необходимо:
  1. Установить JDK (Java Development Kit) версии 8 или выше. Гайд по установке (при необходимости) находится [здесь](https://www.oracle.com/java/technologies/downloads/)
  2. Установить Gradle с помощью инструкции по [этой](https://docs.gradle.org/current/userguide/installation.html) ссылке
  3. Проверить установку с помощью команды `gradle -v`
2. Сборка приложения с помощью ввода команды `./gradlew build` в директории `biv-insurance-main` данного проекта
3.  После сборки приложения для его запуска необходимо запустить созданный `.jar` файл
4.  Обращение к API будет доступно через данный URL: `localhost:8082`

---

## Основной функционал проекта
### Frontend
* Drag-and-drop интерфейс для создания и настройки страховых продуктов.
* Возможность ручного задания зависимостей между параметрами.
* Простой и интуитивно понятный интерфейс, имитирующий работу с документами.
### Backend
* REST API для управления данными страховых продуктов.
* Поддержка EAV-подобной модели данных для гибкого хранения параметров.
* Подключение к PostgreSQL для хранения данных.

---

## Технологии и инструменты
### Frontend
* HTML/CSS
* JavaScript
### Backend
* Java
* Spring Boot
* PostgreSQL
* Gradle
### Инструменты
* Git
* IntelliJ IDEA

---

## Команда проекта
1. Варвара Попадьина - Frontend, разработка интерфейса
2. Агаверд Сейфаев - Design, создание прототипа интерфейса
3. Максим Манин - Backend, разработка REST API и базы данных
4. Максим Головизнин - Backend, разработка REST API и базы данных

---

## Архитектура и структура проекта
### Структура папок
* **frontend/** - содержит файлы интерфейса (HTML, CSS, JS).
* **biv-insurance-main/** - содержит исходный код backend части.
* **src/main/java/** - Java-код приложения.
* **src/main/resources/** - ресурсы, включая файлы конфигурации и OpenAPI спецификацию.
* **db.png** - схема базы данных.
### Диаграмма архитектуры
![Схема данных](./db.png)
Схема данных состоит из нескольких таблиц. В сущности, мы реализовали EAV-паттерн, но видоизменили его под наши потребности.
* `insurance` - страховой продукт. состоит из набора свойств.
  * `created_at` - временная метка создания продукта. в данный момент не используется, но полезно иметь.
  * `name` - название страхового продукта.
* `property_type` - шаблон свойства страхового продукта.
  * `name` - название свойства.
  * `description` - описание свойства.
  * `type` - тип свойства. может принимать значения `float`, `boolean`, `string`, `date` либо `dictionary_id`,
    если тип является справочником.
* `property` - свойство страхового продукта.
  * `value` - значение свойства, хранится внутри json. для примитивных типов внутри json хранится только поле `value`,
    для справочных также хранится `dictionary_id`.
  * `insurance_id` - id продукта, к которому относится свойство.
  * `rule_id` - id правила, по которому это свойство может влиять на другие свойства.
  * `type_id` - id шаблона свойства.
* `rule` - правила, по которым одни свойства могут влиять на другие.
  * `type` - тип правила. может принимать значения `float`, `boolean`, `string`, `date` либо `dictionary_id`,
    если тип является справочником. от типа зависит структура поля `value`.
  * `value` - правило, которое ограничивает возможные значения свойств. для типов `float` и `date` это два поля `start`
    и `end`, которые ограничивают возможный диапазон значений. для типов `boolean` и `string` это одно конкретное значение.
    для справочного типа это массив `values`, определяющий все возможные значения свойства.
  * `property_id` - id свойства, к которому применяется правило.
* `dictionary` - справочный тип, по сути enum.
  * `name` - название типа.
* `dictionary_value` - значение справочного типа.
  * `value` - значение.
  * `dictionary_id` - id справочника, к которому относится значение.


---

## Демонстрация работы проекта
### Скриншоты
### Ссылки
* API в формате OpenAPI можно посмотреть здесь - [ссылка](biv-insurance-main/src/main/resources/api.yaml).

---

## Итоги
Мы предоставили решение задачи гибкой настройки страховых продуктов с помощью идеи drag-and-drop интерфейса и EAV-подобной модели данных. Этот проект отличается от аналогов своей простотой и удобством использования, а также возможностью легко масштабировать и расширять функционал.

### Возможные улучшения
* Добавление авторизации и аутентификации.
* Интеграция с существующими системами страхования.
* Улучшение UX/UI для более сложных сценариев использования.
* Расширение типов полей.
* Прикрепление документов.
* Визуализация зависимостей (например, в виде графов).
* Генерация документов по конфигурации продукта.
